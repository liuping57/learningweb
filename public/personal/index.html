<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css">  
        <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
		<style type="text/css">
			 *{
	        	margin:0px;
	        	padding: 0px;
	        	list-style: none;
        		font-family: "微软雅黑";
        		color: #000000;
        	    }
			.one{
				margin-left: 40%;
				width:50%;
				height: 100px;
				
				}
			.one a:hover{
            	color: gray;
            }
			.two{
				width: 100%;
				height:270px;
				}

			.nav-item a{
				color:#000000;
			}
			.twoa{
				width: 16%;
				height: 230px;
				float: left;
				margin-left: 50px;
				}
			.f{
				width: 200px;
				height: 200px;
				border-radius:50%;
				overflow: hidden;
				margin-top: 30px;
			}
			.twob{
				width: 35%;
				height: 240px;
				float: left;
				margin-top: 30px;
				}
			.aa{
        	width: 700px;
        	height: 300px;
        	margin: auto;
        }
			.twoc{
				width:40%;
				height: 200px;
				float: right;
				}
			.twoc ul li {
	        	text-align: center;
	        	margin: auto;
	        	width: 150px;
	        	height: 50px;
	        	border:1px solid gainsboro;
	        	border-radius: 15px;
	        	margin-left:30px ;
	        	margin-top: 30px;
        	
       		 }
         	.twoc ul li a{
	         	margin-top: -15px;
	         	padding: -10px;
         	}
         	.twoc ul li a:hover{
            	color: gray;
            }
			.three{
				width:100%;
				height:470px;
				padding-left: 60px;
			    
				}
			.threea{
				width: 25%;
				height: 400px;
				float: left;
				}
			.threea a{
				color: #000000;
			}
			.threea  a:hover{
            	color: gray;
            }
			.dd {
				text-align: center;
	        	margin: auto;
	        	width: 150px;
	        	height: 50px;
	        	border:1px solid gainsboro;
	        	border-radius: 15px;
	        	margin-left:20px ;
	        	margin-top: 30px;
	        	padding-top :-100px;
       			}
       		.dd a{
       				margin-top: -15px;
	         		padding: -10px;
       			}
			.threeb{
				width:25%;				
				height: 400px;
				float: left;
				padding-left: 40px;
				}
			.threeb a{
				color:#000000
			}
			.threeb  a:hover{
            	color: gray;
            }
			.threec{
				width: 25%;
				height: 400px;
				float: left;
				padding-left: 70px;
				
				}
			.threec a{
				color:#000000
			}
			.threec  a:hover{
            	color: gray;
            }
			.threed{
				width: 25%;
				height: 400px;
				float: left;
				padding-left: 70px;
				
				}
			.threed a{
				color:#000000
			}
			.threed  a:hover{
            	color: gray;
            }
            .four{
            	margin-top: 0%;
            	width: 100%;
            	height: 400px;           	
            	}
            .foura{
            	width: 100%;
            	height: 400px;
            	margin-top: 4%;
            	border:1px solid gainsboro;
            	overflow: hidden;
            	float: left;
            }
            .foura-tit{
            	 height: 70px;
            	 position: relative;
            	 background:#E9E7E7;
            
            }
            .foura-tit ul{
            	position: absolute;
            	width: 300px;
            	left: -1px;
            }
            .foura-tit li{
            	float:left;
            	width: 130px;
            	height: 70px;
            	line-height: 70px;
            	text-align: center;
            	overflow: hidden;
            	background: #FFF;
            	border-bottom: 1px solid #EEE;
            	background:#E9E7E7;
            }
            .foura-tit li.select{
            	background: #FFF;
            	border-bottom-color: #FFF;
            	border-left: 1px solid #eee;
            	border-right: 1px solid #eee;
            	padding:0px;
            	font-weight:bolder;
            }  
            .foura li a:link,.foura li a:visited{
            	 color: #000;
            }
            .foura li a:hover{
            	color: gray;
            }
            .foura-con .mod{
            	margin: 10px 10px 10px 19px;
            }
            .foura-con .mod ul li{
            	float: left;
            	width: 260px;
            	height: 70px;
            	overflow: hidden;
            }
			.five{

				width: 100%;
				height: 120px;
				background:#222222;
				}
			
								
		ul{
			list-style: none;
			height:90px;
			}
		li{
			float: left;
			}
/*		a{
			text-decoration: none;
			display: block;
			height: 90px;
			line-height: 90px;
			text-align: center;
			color: #000000;
			}*/
		a:hover{
			color:black;
			}
	
		form {
            position: relative;
            width: 300px;
            margin: 0 auto;
        }
        

       
       
        input, button {
            border: none;
            outline: none;
        }

        input {
            width: 100%;
            height: 42px;
            padding-left: 13px;
        }

        button {
            height: 42px;
            width: 42px;
            cursor: pointer;
            position: absolute;
        }
        .bar5 {
        	width:300px;
        	height:50px;
        	float:left;
        	margin-left:860px;
        	margin-top: -78px;
                	
        }
       .bar5 input, .bar5 button {
            background: transparent;
        }
        .bar5 input {
            border: 2px solid #F9F0DA;
        }
        .bar5 button {
            top: 0;
            right: 0;
        }
        .bar5 button:before {
            content: "\f002";
            font-family: FontAwesome;
            font-size: 16px;
            color: #000000;
        }
        .bar5 input:focus {
            border-color: #398439;
        }
        .tx{
        	border:1px solid greenyellow;
			border-radius:10px;
			width: 170px;
			height:30px;
        }  		
		.yqlj{
				text-align: center;
				margin-top: 120px;
			}
		.yqlj a{
				color:#000000;
			}
		.dbba{
			text-align: center;
			margin-top: 120px;
		}

		.fileinput-button {
            position: relative;
            display: inline-block;
        }

        .fileinput-button input{
            position: absolute;
            right: 0px;
            top: 0px;
        }
		</style>
		<script>
			//注销操作。。
			function logout() {
			     $.ajax({
			         type: "post",
			         url: "../index.php?s=/user/login/logout",
			         async: "true",
			         dataType: "json",
			         success: function (data) {
			               window.location.href="../index";
			             }

			     });
			}
			function footer(){
			window.location.href="http://www.suse.edu.cn/";	
			}
			function $(id){
				return typeof id==="string"?document.getElementById(id):id;
			}
			window.onload=function(){
				//获取鼠标滑过或点击的标签和要切换的内容的元素
				// var titles=$("foura-tit").getElementsByTagName("li"),
				//     divs=$("foura-con").getElementsByTagName("div");
				//     if(titles.length!=divs.length)
				//     return;
				// //遍历titles下的所有li
				// for(var i=0;i<titles.length;i++){
				// 	titles[i].id=i;
				// 	titles[i].onmouseover=function(){
				// 		//清除所有li上的class
				// 		for( var j=0;j<titles.length;j++){
				// 			titles[j].className="";
				// 			divs[j].style.display="none";
				// 		}
				// 		//设置当前为高亮显示
				// 		this.className="select";
				// 		divs[this.id].style.display="block";
				// 	}
				// }

			}
				function list1click()
				{
					$("#block1").css("display","block");
					$("#block2").css("display","none");
					$("#list1").addClass("select");
					$("#list2").removeClass("select");
				}
				function list2click()
				{
					$("#block1").css("display","none");
					$("#block2").css("display","block");
					$("#list2").addClass("select");
					$("#list1").removeClass("select");
				}
		</script>
		<link rel="stylesheet" type="text/css" href="css/font-awesome.4.6.0.css">
<link rel="stylesheet" href="css/amazeui.min.css">
<link rel="stylesheet" href="css/amazeui.cropper.css">
<link rel="stylesheet" href="css/custom_up_img.css">
<style type="text/css">
	.up-img-cover {width: 100px;height: 100px;}
	.up-img-cover img{width: 100%;}
</style>
	</head>
	<body>
		<div style="background-color:#EEEEEE; width: 100%;">
			<div class="pull-left">
                <img src="/static/logo/logo3.png" width="110px" height="100px" onclick="window.location.href='/'">
            </div>
			<div class="one" ><br>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="/index"​>首页</a>
            </div>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="/index/#00"​>课程分类</a>
            </div>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="/index/#01"​>精品课程</a>
            </div>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="/index/#02"​>推荐课程</a>
            </div>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="/index/#03"​>优课展示</a>
            </div>
				<div class="nav-item " style="float: left;margin-left: 50px;display: none" id="admingoto">
					<a href="../admin"​>管理员入口</a>
				</div>
            <div class="nav-item " style="float: left;margin-left: 50px;">
                <a href="#"​ onclick="logout()">退出登陆</a>
            </div>
        </div>
		</div>
		
		<div class="two">
			<div class="twoa" >
				<div class="f" >
					<center>
				<div class="up-img-cover"  id="up-img-touch"  style="width: 100%;height: 100%">
				<img class="am-circle" alt="点击图片上传" src="" data-am-popover="{content: '点击上传', trigger: 'hover focus'}" id="headimg">
				</div>
</center>
<div><a style="text-align: center; display: block;"  id="pic"></a></div>

<!--图片上传框-->
<div class="am-modal am-modal-no-btn up-frame-bj " tabindex="-1" id="doc-modal-1">
  <div class="am-modal-dialog up-frame-parent up-frame-radius">
	<div class="am-modal-hd up-frame-header">
	   <label>修改头像</label>
	    
	  <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
	  

	</div>
	<div class="am-modal-bd  up-frame-body">
	  <div class="am-g am-fl">
		<div class="am-form-group am-form-file">
		  <div class="am-fl">
     <span class="fileinput-button">
            <span>上传头像</span>
            <input type="file" id="inputImage">
        </span>
		  </div>
		  
		</div>
	  </div>
	  <div class="am-g am-fl" >
		<div class="up-pre-before up-frame-radius">
			<img alt="" src="" id="image" >
		</div>
		<div class="up-pre-after up-frame-radius">
		</div>
	  </div>
	  <div class="am-g am-fl">
		<div class="up-control-btns">
			<span class="am-icon-rotate-left"  onclick="rotateimgleft()"></span>
			<span class="am-icon-rotate-right" onclick="rotateimgright()"></span>
			<span class="am-icon-check" id="up-btn-ok" url="../index.php?s=/user/upload/headimg"></span>
		</div>
	  </div>
	  
	</div>
  </div>
</div>

<!--加载框-->
<div class="am-modal am-modal-loading am-modal-no-btn" tabindex="-1" id="my-modal-loading">
  <div class="am-modal-dialog">
	<div class="am-modal-hd">正在上传...</div>
	<div class="am-modal-bd">
	  <span class="am-icon-spinner am-icon-spin"></span>
	</div>
  </div>
</div>

<!--警告框-->
<div class="am-modal am-modal-alert" tabindex="-1" id="my-alert">
  <div class="am-modal-dialog">
	<div class="am-modal-hd">信息</div>
	<div class="am-modal-bd"  id="alert_content">
			  成功了
	</div>
	<div class="am-modal-footer">
	  <span class="am-modal-btn">确定</span>
	</div>
  </div>
</div>
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/amazeui.min.js" charset="utf-8"></script>
<script src="js/cropper.min.js" charset="utf-8"></script>
<script src="js/custom_up_img.js" charset="utf-8"></script>
<script type="text/javascript">

	$(document).ready(
        function(){
            $.ajax({
                type:"post",
                url:"../index.php?s=/user/personal/userinfo",
                async:"true",
                dataType:"json",
                success:function(data){
                	if(data.linecode==402)
                	{
                		$(location).attr('href', '../admin/error/nologin');
                	}
                	else
                	{
                		$("#headimg").attr('src','../'+data.headimg);
                		$("#username").text("用户名："+data.user_name);
                		$("#regtime").text("注册时间："+data.user_date);
                		$("#logintime").text("上次登录："+data.login_time);
                        if (data.chmod >= 3)
                        {
                            $("#admingoto").css('display','block');
                        }
                	}
                	

                }
            });
        }
        )
</script>
				</div>					
			</div>
			<div class="twob" align="center">
				<h2 id="username"></h2></br>
                <p id="regtime"></p>
                <p id="logintime"></p>
			</div>
			<div class="twoc" align="center" >
				<ul>
					<li>
	               		<a href="#" onclick="personinfo()"><img src="img/tp11.png" />&nbsp;<span >查看信息</span></a>	                
	                </li>
					<li>
	               	  	<a href="#" onclick="updateuserinfo()"><img src="img/tp08.png" / >&nbsp;<span >修改个人信息</span></a>		                    
					</li>
					<li>						
      					<a href="#" onclick="updateuserpwd()"><img src="img/tp07.png"  />&nbsp;<span >修改密码</span></a>               	                	
					</li>
	                <li>
	      				<a href="#" onclick="studygroup()"><img src="img/tp06.png" />&nbsp;<span >我的班级</span></a>              
	                </li>
	                <li>
	               		<a href="#" onclick="classnotes()"><img src="img/tp10.png" />&nbsp;<span >课堂笔记</span></a>		                 	
	                </li>            
					<li>
	               		<a href="#" onclick="learningprogress()"><img src="img/tp09.png" />&nbsp;<span >学习进度</span></a>						
					</li>	               	                             
				</ul>               
			</div>
		</div>


		<div class="three" style="border: 1px solid gainsboro;display: block" id="myinfo">
			<div class="threea" align="center">
				<li><img src="img/tp4 .png" />
      				<h1>学习进度</h1>     
      				<p>已学习的课程 </p>
      				<p>待完成的课程<span>0</span>个</p>    
      				<p>学习的记录</p>
      				<p class="dd"><a href="#" onclick="learningprogress()">进入学习中心</a></p>
				</li>							
			</div>
			<div class="threeb" align="center">
				<li><img src="img/tp5 .png" />
      				<h1>收藏课程</h1>     
      				<p>喜欢的课程 </p>
       				<p>推荐的课程</p>
      				<p>一些技术类型的课程</p>
      				<p class="dd"><a href="collect/index.html">查看收藏课程</a></p>
				</li>    
			</div>
			<div class="threec" align="center">
				<li><img src="img/tp2 .png" />
      			<h1>资源下载</h1>
      			<p>我的视频教程 </p>
      			<p>已下载视频</p>
      			<p>已学视频</p>
     			<p class="dd"><a href="/index/index/show">进入资源下载</a></p>
     			</li>
			</div>
			<div class="threed" align="center">
				<li><img src="img/tp3 .png" />
      			<h1>查看成绩</h1>
      			<p>素质核心必修课程 </p>
      			<p>素质核心实践课程</p>
      			<p>素质选修实践课程</p>
      			<p class="dd"><a href="know/index.html">查看已出成绩</a></p>
      			</li>
			</div>
		</div>
		<!-- 更改个人信息 -->
				<div class="three" style="border: 1px solid ;display: none;" id="updateinfo">
			
		<center>
				<table width="60%" border="0" style="margin-top: 5%">
					<caption><h2>修改个人信息</h2></caption>
					<tr align="left">
						<td align="right">昵称:</td>
						<td><input type="text" name="user_name" id="user_name" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
						<td align="right">QQ:</td>
						<td><input type="text" name="user_qq" id="user_qq" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
					</tr>
					<tr>
						<td align="right">TEL:</td>
						<td><input type="text" name="user_qq" id="user_tel" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
						<td align="right">性别:</td>
						<td align="center"><img src="img/she.png" width="40px" height="40px">
							<input type="radio" name="sex" checked style="width: 20px;vertical-align: bottom;" value="0" id="sex1" />
							&nbsp;&nbsp;&nbsp;
							<img src="img/he.png" width="40px" height="40px">
							<input type="radio" name="sex" style="width: 20px;vertical-align: bottom; " value="1" id="sex2">
						</td>
					</tr>
					<tr align="left">
						<td align="right">Email:</td>
						<td><input type="text" id="user_mail" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
						<td align="right"></td>
						<td></td>
					</tr>
					<tr>
						<td colspan="4" align="center">
							<input type="button" name="" value="保存修改" onclick="subuserinfo()">
						</td>
					</tr>
			</table>
		</center>
		</div>
		<!-- 更改密码 -->
		<div class="three" style="border: 1px solid greenyellow;display: none;" id="updatepwd">
			
		<center>
				<table width="60%" border="0" style="margin-top: 5%">
					<caption><h2>修改密码</h2></caption>
					<tr align="left">
						<td align="right">原密码：</td>
						<td><input type="password" name="user_name" id="pwd" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
					</tr>
					<tr>
						<td align="right">新密码：</td>
						<td><input type="password" name="user_qq" id="pwd1" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
					</tr>
					<tr align="left">
						<td align="right">确认密码：</td>
						<td><input type="password" id="pwd2" style="padding-top:20px;"><hr width="80%" style="margin-top:0px;" align="left"></td>
					</tr>
					<tr>
						<td colspan="3" align="center">
							<p><input type="button" name="" value="保存修改" onclick="subuserpwd()" style="width: 80%"></p>
						</td>
					</tr>
			</table>
		</center>
		</div>
		<!-- 我的班级-->
		<div class="three" style="border: 1px solid greenyellow;display: none;" id="studygroup">
			
		<center>
				<div class="aa" width="60%" border="0" style="margin-top: 5%">
				 	<table class="table table-hover" id="classinfo">


	           </table>
			</div>
		</center>
		</div>
		<!-- 课堂笔记-->
		<div class="three" style="border: 1px solid greenyellow;display: none;" id="classnotes">
			
		<center>
				<table width="80%" border="0"" >					
					<caption style="padding-left: 450px;"><h2>课堂笔记</h2></caption>
					<tr align="left">
						<td align="right"></td>
						<td>
							<div style="width: 200px;">
								<select class="form-control" id="courselist" onchange="loadnote()">

					           </select>
							</div>
							
						</td>						
					</tr>
					<tr>
						<td align="right"></td>
						<td>
							<div id="noteeditor"></div>
							<input type="text" name="" id="noteid" hidden="hidden">
						</td>
					</tr>
					<tr>
						<td></td>
						<td align="right">
							<div style="margin-top: 2px">
								<a href="javascript:void(0)" class="btn btn-success" onclick="sharenote()">分享我的笔记   <span class="glyphicon glyphicon-send" aria-hidden="true"></span></a>
								<a thref="javascript:void(0)" class="btn btn-warning" onclick="subnote()" >更新笔记    <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span></a>
							</div>
						</td>
					</tr>
					
			</table>
		</center>
		</div>
		<!-- 学习进度-->
		<div class="three" style="border: 1px solid greenyellow;display: none;" id="learningprogress">
			
		<center>
				<div class="aa" width="60%" border="0" style="margin-top: 5%">			
				<table class="table table-hover" id="userprocess">



			</table>
			</div>
		</center>
		</div>		
<div class="four" >
        	<div class="foura" style="overflow: auto">
        		<div class="foura-tit" id="foura-tit">
        			<ul>
        				<li id="list1" class="select"><a href="javascript:(0);" onclick="list1click()">网站动态    <span class="badge">0</span></a></li>
        				<li id="list2"><a href="javascript:(0);" onclick="list2click()">我的消息    <span class="badge" id="vmessage">0</span></a></li>      				
        			</ul>
        		</div>
        		<div class="foura-con" id="foura-con" style="overflow: auto">
        			<div class="mod" style="display: block;" id="block1">
        				<ul>
        				<li class="select">暂无动态<a href="#"></a></li>
        				<li><a href="#"></a></li>
        				</ul>
        			</div>
        			<div class="mod " style="display: none;" id="block2">
        						<table class="table table-condensed table-responsive" border="0" id="msglist" style="overflow:auto;">
        							
        						</table>	
        			</div>
        		</div>
        	</div>
</div>
		<div class="five">
			 <div class="yqlj">
			 	<ul>
			 		<li style="padding-left:40px"><a href="#">关于网站</a></li>
			 		<li style="padding-left:40px"><a href="#">关于我们</a></li>
			 		<li style="padding-left:40px"><a href="#">建议留言</a></li>
			 		<li style="padding-left:40px"><a href="#">购买教程</a></li>
			 		<li style="padding-left:40px"><a href="#">在线咨询</a></li>
			 	</ul>
			 	  <div style="margin-top: -30px;>
  					Copyright© 网络教学资源网  版权所有     友情链接：<span onclick="footer()" style="cursor:pointer">四川理工学院</span>     &nbsp; &nbsp; &nbsp;  &nbsp;电话:7000-5858-23
  				</div>
			 </div>
		</div>
		<script src="https://unpkg.com/wangeditor@3.1.1/release/wangEditor.min.js"></script>
			<script type="text/javascript">
				//课堂笔记生成和编辑
				 var E = window.wangEditor;
    			var editor2 = new E('#noteeditor');
    			editor2.create();
    				//加载课程下拉列表
				            $.ajax({
				            type: "post",
				            url: "/api/Userprocess/process",
				            async: "true",
				            dataType: "json",
				            success: function (data) {
				            	var sel="";
				            	for(var i=0;i<data.length;i++)
				            	{
				            		sel +='<option value="'+data[i].course_id+'">'+data[i].course_name+'</option>';
				            	}
				                document.getElementById('courselist').innerHTML=sel;
				            }
				        });
				  //加载笔记内容
				  function loadnote()
				  {
				  		
				  	$.ajax({
			         type: "post",
			         url: "/api/note/getnote",
			         async: true,
			         dataType: "json",
			         data: {
			             course_id:$("#courselist").val()
			         },
			         success: function (data) {

			         		editor2.txt.html(data[0].note);
			         		$("#noteid").val(data[0].id);
			        }
			        }); 
				  }
				  function subnote()
				  {
				  	$.ajax({
			         type: "post",
			         url: "/api/note/subnote",
			         async: true,
			         dataType: "json",
			         data: {
			             course_id:$("#courselist").val(),
			             note:editor2.txt.html()
			         },
			         success: function (data) {

			         		alert(data.msg);
			        }
			        }); 
				  }


			var $modal = $('#my-modal-loading');
    		var $modal_alert = $('#my-alert');

			//第一个  查看信息板块
			function personinfo()
			{
				$("#updateinfo").css("display","none");
				$("#updatepwd").css("display","none");
				$("#myinfo").css("display","block");
				$("#studygroup").css("display","none");
				$("#classnotes").css("display","none");
				$("#learningprogress").css("display","none");

			}
			//第二个点击修改个人信息板块
			function updateuserinfo()
			{
				$("#updateinfo").css("display","block");
				$("#myinfo").css("display","none");
				$("#updatepwd").css("display","none");
				$("#studygroup").css("display","none");
				$("#classnotes").css("display","none");
				$("#learningprogress").css("display","none");
				$.ajax({
                type:"post",
                url:"../index.php?s=/user/personal/userinfo",
                async:"true",
                dataType:"json",
                success:function(data){
                	if(data.linecode==402)
                	{
                		alert(data.msg);
                		$(location).attr('href', '../');  
                	}
                	else
                	{
                		$("#headimg").attr('src','../'+data.headimg);
                		$("#username").text("用户名："+data.user_id);
                		$("#regtime").text("注册时间："+data.user_date);
                		$("#logintime").text("上次登录:"+data.login_time);
                		$("#user_name").val(data.user_name);
                		$("#user_qq").val(data.QQ);
                		$("#user_tel").val(data.tel);
                		$("#user_mail").val(data.email);
                		if(data.sex==1)
                		{
                			$("#sex2").attr("checked","checked");
                		}
                		else if (data.sex==0) {
                			$("#sex1").attr("checked","checked");
                		}
                	}
                	

                }
            });
			}
			//第三个修改密码板块
			function updateuserpwd()
			{
				$("#updateinfo").css("display","none");
				$("#myinfo").css("display","none");
				$("#updatepwd").css("display","block");
				$("#studygroup").css("display","none");
				$("#classnotes").css("display","none");
				$("#learningprogress").css("display","none");
			}
						
					    
                		
                		
                		
			//点击提交更改的个人信息
				function subuserinfo()
				{               		
	               $.ajax({
			         type: "post",
			         url: "../index.php?s=/user/personal/UpdateUserInfo",
			         async: true,
			         dataType: "json",
			         data: {
			             username:$("#user_name").val(),
			             qq:$("#user_qq").val(),
			             tel:$("#user_tel").val(),
			             sex:parseInt($('input:radio[name="sex"]:checked').val()),
			             email:$("#user_mail").val()
			         },
			         success: function (data) {
			         		if (data.linecode==200) {
			         			updateuserinfo();
			         		}
			         		else
			         		{
			         			$modal.modal('close');
                				set_alert_info(data.msg);
                				$modal_alert.modal();
			         		}
			         		
			        }
			        }); 					
				}
			//更改密码ajax提交代码
			function subuserpwd()
			{
				$.ajax({
			         type: "post",
			         url: "../index.php?s=/user/personal/updateuserpwd",
			         async: true,
			         dataType: "json",
			         data: {
			             pwd:$("#pwd").val(),
			             pwd1:$("#pwd1").val(),
			             pwd2:$("#pwd2").val(),
			         },
			         success: function (data) {
			         		if (data.linecode==200) {

			         			$modal.modal('close');
                				set_alert_info(data.msg);
                				$modal_alert.modal();
			         			updateuserinfo();
			         		}
			         		else
			         		{
			         			$modal.modal('close');
                				set_alert_info(data.msg);
                				$modal_alert.modal();
			         		}
			         		
			        }
			        }); 
			}
			//第四个小组学习板块
			function studygroup()
			{
				$("#updateinfo").css("display","none");
				$("#myinfo").css("display","none");
				$("#updatepwd").css("display","none");
				$("#studygroup").css("display","block");
				$("#classnotes").css("display","none");
				$("#learningprogress").css("display","none");
				getclassinfo();
			}
			//第五个 课堂笔记板块
			function classnotes()
			{
				$("#updateinfo").css("display","none");
				$("#myinfo").css("display","none");
				$("#updatepwd").css("display","none");
				$("#studygroup").css("display","none");
				$("#classnotes").css("display","block");
				$("#learningprogress").css("display","none");
				loadnote();
			}
			//第六个 课堂笔记板块
			function learningprogress()
			{
				$("#updateinfo").css("display","none");
				$("#myinfo").css("display","none");
				$("#updatepwd").css("display","none");
				$("#studygroup").css("display","none");
				$("#classnotes").css("display","none");
				$("#learningprogress").css("display","block");
				getprocess();
				
			}

					function viewmsg()
					{
					var msg="";
					$.ajax({
					 type: "post",
			         url: "/user/message/getmsg",
			         async: true,
			         dataType: "json",
			         success: function (data) {
			         	for (var i =0; i<data.length; i++) {

			         		msg +=' <tr><th>'+(i+1)+'</th><th>['+data[i].type+']</th><td>'+data[i].msg+'</td><td>作者：'+data[i].send+'</td><td>'+data[i].gettime+'</td><td><a href="javascript:void(0)" class="btn btn-danger" onclick="delmsg('+data[i].id+')">删除</a></td></tr>';

			         	}
			         	document.getElementById('msglist').innerHTML=msg;
			         	document.getElementById('vmessage').innerHTML=data.length;
			         		
			        }
			        });
					}						//读取系统消息

					viewmsg();
			        //删除message
			        function delmsg(id)
			        {
			        $.ajax({
			         type: "post",
			         url: "/user/message/delmsg",
			         async: true,
			         dataType: "json",
			         data: {
						id:id
			         },
			         success: function (data) {

			         		alert(data.msg);
			         		viewmsg();
			        }
			        }); 
			        }
			        function getprocess()
			        {
				        $.ajax({
				         type: "post",
				         url: "/api/userprocess/process",
				         async: true,
				         dataType: "json",
				         success: function (data) {
				         	document.getElementById("userprocess").innerHTML='<caption><h2>学习进度</h2></caption><tr><th>序号</th><th>课程名称</th><th>学习进度</th>	</tr>';
				         	for(var i=0;i<data.length;i++)
				         	{
				         		$("#userprocess").append('<tr><td>'+(i+1)+'</td><td>'+data[i].course_name+'</td><td><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="'+data[i].process+'" aria-valuemin="0" aria-valuemax="100" style="width: '+data[i].process+'%;"> '+data[i].process+'%</div></div></td><td><a href="/user/getclass/course/?id='+data[i].course_id+'" class="btn btn-info"><span class="glyphicon glyphicon-leaf" aria-hidden="true"></span>   前往学习</a></td></tr>');
				         	}

				        }
				        }); 
			        }

			        //获取班级信息
			        function getclassinfo()
			        {
				        $.ajax({
				         type: "post",
				         url: "/api/classinfo/info",
				         async: true,
				         dataType: "json",
				         success: function (data) {
				         	document.getElementById("classinfo").innerHTML='<caption><h2>我的班级</h2></caption><tr><th>序号</th><th>班级名称</th><th>课程名称</th><th>授课教师</th></tr>';
				         	for(var i=0;i<data.length;i++)
				         	{
				         		$("#classinfo").append('<tr><td>'+(i+1)+'</td><td>'+data[i].course_name+'班</td><td>'+data[i].course_name+'</td><td>'+data[i].belong_author+'</td></tr>');
				         	}

				        }
				        }); 
			        }

			        //分享笔记
			        function sharenote()
			        {
			        	window.open("/api/note/sharenote/id/"+$("#noteid").val());
			        }

		</script>
	</body>
</html>
